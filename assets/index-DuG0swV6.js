var _e=Object.defineProperty;var we=(e,t,n)=>t in e?_e(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var G=(e,t,n)=>(we(e,typeof t!="symbol"?t+"":t,n),n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))l(i);new MutationObserver(i=>{for(const f of i)if(f.type==="childList")for(const c of f.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&l(c)}).observe(document,{childList:!0,subtree:!0});function n(i){const f={};return i.integrity&&(f.integrity=i.integrity),i.referrerPolicy&&(f.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?f.credentials="include":i.crossOrigin==="anonymous"?f.credentials="omit":f.credentials="same-origin",f}function l(i){if(i.ep)return;i.ep=!0;const f=n(i);fetch(i.href,f)}})();function J(){}function he(e){return e()}function ne(){return Object.create(null)}function H(e){e.forEach(he)}function pe(e){return typeof e=="function"}function ye(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}let U;function le(e,t){return e===t?!0:(U||(U=document.createElement("a")),U.href=t,e===U.href)}function ve(e){return Object.keys(e).length===0}function o(e,t){e.appendChild(t)}function W(e,t,n){e.insertBefore(t,n||null)}function R(e){e.parentNode&&e.parentNode.removeChild(e)}function be(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function p(e){return document.createElement(e)}function M(e){return document.createTextNode(e)}function L(){return M(" ")}function $e(){return M("")}function z(e,t,n,l){return e.addEventListener(t,n,l),()=>e.removeEventListener(t,n,l)}function a(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function me(e){return e===""?null:+e}function Se(e){return Array.from(e.childNodes)}function Q(e,t){t=""+t,e.data!==t&&(e.data=t)}function F(e,t){e.value=t??""}function ie(e,t,n,l){n==null?e.style.removeProperty(t):e.style.setProperty(t,n,l?"important":"")}let ee;function B(e){ee=e}const I=[],se=[];let T=[];const oe=[],ke=Promise.resolve();let Y=!1;function Oe(){Y||(Y=!0,ke.then(ge))}function Z(e){T.push(e)}const X=new Set;let D=0;function ge(){if(D!==0)return;const e=ee;do{try{for(;D<I.length;){const t=I[D];D++,B(t),Le(t.$$)}}catch(t){throw I.length=0,D=0,t}for(B(null),I.length=0,D=0;se.length;)se.pop()();for(let t=0;t<T.length;t+=1){const n=T[t];X.has(n)||(X.add(n),n())}T.length=0}while(I.length);for(;oe.length;)oe.pop()();Y=!1,X.clear(),B(e)}function Le(e){if(e.fragment!==null){e.update(),H(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(Z)}}function xe(e){const t=[],n=[];T.forEach(l=>e.indexOf(l)===-1?t.push(l):n.push(l)),n.forEach(l=>l()),T=t}const Ee=new Set;function Ne(e,t){e&&e.i&&(Ee.delete(e),e.i(t))}function re(e){return(e==null?void 0:e.length)!==void 0?e:Array.from(e)}function Ce(e,t,n){const{fragment:l,after_update:i}=e.$$;l&&l.m(t,n),Z(()=>{const f=e.$$.on_mount.map(he).filter(pe);e.$$.on_destroy?e.$$.on_destroy.push(...f):H(f),e.$$.on_mount=[]}),i.forEach(Z)}function Pe(e,t){const n=e.$$;n.fragment!==null&&(xe(n.after_update),H(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function je(e,t){e.$$.dirty[0]===-1&&(I.push(e),Oe(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function Ae(e,t,n,l,i,f,c=null,$=[-1]){const w=ee;B(e);const s=e.$$={fragment:null,ctx:[],props:f,update:J,not_equal:i,bound:ne(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(w?w.$$.context:[])),callbacks:ne(),dirty:$,skip_bound:!1,root:t.target||w.$$.root};c&&c(s.root);let x=!1;if(s.ctx=n?n(e,t.props||{},(d,S,...E)=>{const y=E.length?E[0]:S;return s.ctx&&i(s.ctx[d],s.ctx[d]=y)&&(!s.skip_bound&&s.bound[d]&&s.bound[d](y),x&&je(e,d)),S}):[],s.update(),x=!0,H(s.before_update),s.fragment=l?l(s.ctx):!1,t.target){if(t.hydrate){const d=Se(t.target);s.fragment&&s.fragment.l(d),d.forEach(R)}else s.fragment&&s.fragment.c();t.intro&&Ne(e.$$.fragment),Ce(e,t.target,t.anchor),ge()}B(w)}class De{constructor(){G(this,"$$");G(this,"$$set")}$destroy(){Pe(this,1),this.$destroy=J}$on(t,n){if(!pe(n))return J;const l=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return l.push(n),()=>{const i=l.indexOf(n);i!==-1&&l.splice(i,1)}}$set(t){this.$$set&&!ve(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const ze="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(ze);function ce(e,t,n){const l=e.slice();return l[16]=t[n],l}function ae(e){let t,n,l,i,f,c,$,w=e[16].name+"",s,x,d,S,E=e[16].duration+"",y,P,k,r,u=Array.from(e[16].classes).join(", ")+"",_,g,N,A,C,v=e[16].pinned&&ue();function q(...O){return e[10](e[16],...O)}return{c(){t=p("a"),v&&v.c(),n=L(),l=p("img"),f=L(),c=p("span"),$=p("h2"),s=M(w),x=L(),d=p("span"),S=p("p"),y=M(E),P=M("m"),k=L(),r=p("p"),_=M(u),g=L(),a(l,"alt","favicon"),a(l,"class","site-img"),le(l.src,i=`https://icons.duckduckgo.com/ip3/${e[16].name}.ico`)||a(l,"src",i),a(l,"width","128px"),a($,"class","site-name"),a(S,"class","site-duration"),a(r,"class","site-classes"),a(d,"class","site-bottom-line"),a(c,"class","site-right"),a(t,"href",N="https://"+e[16].name),a(t,"class","site")},m(O,h){W(O,t,h),v&&v.m(t,null),o(t,n),o(t,l),o(t,f),o(t,c),o(c,$),o($,s),o(c,x),o(c,d),o(d,S),o(S,y),o(S,P),o(d,k),o(d,r),o(r,_),o(t,g),A||(C=z(t,"contextmenu",q),A=!0)},p(O,h){e=O,e[16].pinned?v||(v=ue(),v.c(),v.m(t,n)):v&&(v.d(1),v=null),h&1&&!le(l.src,i=`https://icons.duckduckgo.com/ip3/${e[16].name}.ico`)&&a(l,"src",i),h&1&&w!==(w=e[16].name+"")&&Q(s,w),h&1&&E!==(E=e[16].duration+"")&&Q(y,E),h&1&&u!==(u=Array.from(e[16].classes).join(", ")+"")&&Q(_,u),h&1&&N!==(N="https://"+e[16].name)&&a(t,"href",N)},d(O){O&&R(t),v&&v.d(),A=!1,C()}}}function ue(e){let t;return{c(){t=p("span"),t.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" height="16px" viewBox="0 0 16 16" width="16px"><g fill="#222222"><path d="m 9 10 h -2 v 2 l 1 1 l 1 -1 z m 0 0"></path><path d="m 10.707031 3.292969 c -0.1875 -0.1875 -0.441406 -0.292969 -0.707031 -0.292969 h -4 c -0.554688 0 -1 0.449219 -1 1 s 0.445312 1 1 1 h 4 c 0.550781 0 1 -0.449219 1 -1 c 0 -0.265625 -0.105469 -0.519531 -0.292969 -0.707031 z m 0 0"></path><path d="m 4 8.988281 c 0 -2.207031 1.792969 -4 4 -4 s 4 1.792969 4 4 z m 0 0"></path><path d="m 6 2.972656 l 0.222656 4.773438 h 3.585938 l 0.191406 -4.738282 z m 0 0"></path></g></svg>',a(t,"class","pin")},m(n,l){W(n,t,l)},d(n){n&&R(t)}}}function fe(e){let t,n=e[16].duration>e[1]&&ae(e);return{c(){n&&n.c(),t=$e()},m(l,i){n&&n.m(l,i),W(l,t,i)},p(l,i){l[16].duration>l[1]?n?n.p(l,i):(n=ae(l),n.c(),n.m(t.parentNode,t)):n&&(n.d(1),n=null)},d(l){l&&R(t),n&&n.d(l)}}}function Ie(e){let t,n,l,i,f,c,$,w,s,x,d,S,E,y,P,k,r,u,_,g,N,A,C,v,q,O=re(e[0]),h=[];for(let m=0;m<O.length;m+=1)h[m]=fe(ce(e,O,m));return{c(){t=p("main"),n=p("div"),l=p("div"),i=p("h1"),i.textContent="Settings",f=L(),c=p("group"),$=p("label"),$.textContent="Time Threshold:",w=L(),s=p("input"),x=L(),d=p("group"),S=p("label"),S.textContent="Watcher:",E=L(),y=p("input"),P=L(),k=p("div"),r=p("span"),r.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" height="16px" viewBox="0 0 16 16" width="16px"><path d="m 7.5 1.019531 c -0.550781 0 -0.996094 0.445313 -0.996094 0.996094 v 0.453125 c -0.472656 0.128906 -0.929687 0.320312 -1.355468 0.566406 l -0.324219 -0.324218 c -0.390625 -0.390626 -1.019531 -0.390626 -1.410157 0 l -0.703124 0.707031 c -0.390626 0.390625 -0.390626 1.019531 0 1.410156 l 0.320312 0.320313 c -0.246094 0.425781 -0.433594 0.882812 -0.5625 1.355468 h -0.453125 c -0.550781 0 -0.996094 0.445313 -0.996094 0.996094 v 1 c 0 0.550781 0.445313 0.996094 0.996094 0.996094 h 0.449219 c 0.132812 0.472656 0.320312 0.929687 0.566406 1.355468 l -0.320312 0.320313 c -0.390626 0.390625 -0.390626 1.019531 0 1.410156 l 0.703124 0.707031 c 0.390626 0.390626 1.019532 0.390626 1.410157 0 l 0.320312 -0.320312 c 0.429688 0.242188 0.882813 0.433594 1.359375 0.558594 v 0.457031 c 0 0.550781 0.445313 0.996094 0.996094 0.996094 h 0.996094 c 0.554687 0 1 -0.445313 1 -0.996094 v -0.453125 c 0.472656 -0.128906 0.929687 -0.320312 1.355468 -0.566406 l 0.320313 0.324218 c 0.390625 0.390626 1.019531 0.390626 1.410156 0 l 0.707031 -0.707031 c 0.390626 -0.390625 0.390626 -1.019531 0 -1.410156 l -0.320312 -0.320313 c 0.242188 -0.425781 0.433594 -0.882812 0.558594 -1.355468 h 0.453125 c 0.554687 0 1 -0.445313 1 -0.996094 v -1 c 0 -0.550781 -0.445313 -0.996094 -1 -0.996094 h -0.449219 c -0.128906 -0.472656 -0.320312 -0.929687 -0.566406 -1.355468 l 0.324218 -0.320313 c 0.390626 -0.390625 0.390626 -1.019531 0 -1.410156 l -0.707031 -0.707031 c -0.390625 -0.390626 -1.019531 -0.390626 -1.410156 0 l -0.320313 0.320312 c -0.425781 -0.242188 -0.882812 -0.429688 -1.355468 -0.558594 v -0.457031 c 0 -0.550781 -0.445313 -0.996094 -1 -0.996094 z m 0.515625 3.976563 c 1.660156 0 3 1.34375 3 3 s -1.339844 3 -3 3 c -1.65625 0 -3 -1.34375 -3 -3 s 1.34375 -3 3 -3 z m 0 0" fill="#222222"></path></svg>',u=L(),_=p("h1"),_.textContent="Jump back in",g=L(),N=p("h2"),N.textContent="Left-click to open, right-click to pin.",A=L(),C=p("div");for(let m=0;m<h.length;m+=1)h[m].c();a(i,"class","settings-title"),a($,"for","threshold"),a(s,"type","number"),a(s,"id","threshold"),a(s,"min","0"),a(S,"for","watcher"),a(y,"type","text"),a(y,"id","watcher"),a(l,"class","settings-content"),ie(n,"display",e[4]),a(n,"class","settings"),a(r,"class","settings-button"),a(N,"id","info"),a(C,"class","sites"),a(k,"class","content")},m(m,j){W(m,t,j),o(t,n),o(n,l),o(l,i),o(l,f),o(l,c),o(c,$),o(c,w),o(c,s),F(s,e[1]),o(l,x),o(l,d),o(d,S),o(d,E),o(d,y),F(y,e[2]),o(t,P),o(t,k),o(k,r),o(k,u),o(k,_),o(k,g),o(k,N),o(k,A),o(k,C);for(let b=0;b<h.length;b+=1)h[b]&&h[b].m(C,null);v||(q=[z(s,"input",e[6]),z(y,"input",e[7]),z(l,"click",Me),z(n,"click",e[8]),z(r,"click",e[9])],v=!0)},p(m,[j]){if(j&2&&me(s.value)!==m[1]&&F(s,m[1]),j&4&&y.value!==m[2]&&F(y,m[2]),j&16&&ie(n,"display",m[4]),j&35){O=re(m[0]);let b;for(b=0;b<O.length;b+=1){const te=ce(m,O,b);h[b]?h[b].p(te,j):(h[b]=fe(te),h[b].c(),h[b].m(C,null))}for(;b<h.length;b+=1)h[b].d(1);h.length=O.length}},i:J,o:J,d(m){m&&R(t),be(h,m),v=!1,H(q)}}}function K(e){return JSON.parse(localStorage.content)[e]}function V(e,t){let n=JSON.parse(localStorage.content);n[e]=t,localStorage.content=JSON.stringify(n)}function de(e,t){for(const n of e)if(n.rule.regex.test(t.name))for(const l of n.name)t.classes.add(l)}const Me=e=>{e.stopPropagation()};function Te(e,t,n){let l,i=new Date,f=new Date().setDate(i.getDate()-1);new Date(new Date(f).setHours(4,0,0,0)).toISOString(),new Date(new Date(i).setHours(28,0,0,0)).toISOString();let c=[];(!localStorage.content||localStorage.content==="")&&(localStorage.content=JSON.stringify({pins:[],threshold:5,watcher:"aw-watcher-web-firefox"}));let $=K("threshold"),w=K("watcher"),s=!1,x=new Set([]);fetch("http://localhost:5600/api/0/settings/classes").then(r=>r.json()).then(r=>{for(const u of Object.values(r))u.rule.regex&&(u.rule.regex=new RegExp(u.rule.regex.toLowerCase()),x.add(u))}),fetch(`http://localhost:5600/api/0/buckets/${w}/events`).then(r=>r.json()).then(r=>{for(let u of r){let _=!1;for(const g of c)g.name===new URL(u.data.url).host&&(_=!0,g.duration=Math.round(u.duration/60+g.duration)),de(x,g);if(!_){let g={name:new URL(u.data.url).host,duration:Math.round(u.duration/60),classes:new Set([]),pinned:!1};localStorage.content&&localStorage.content.includes(g.name)&&(g.pinned=!0),de(x,g),g.name&&n(0,c=[...c,g])}}});function d(r,u){if(u.preventDefault(),r.pinned=!r.pinned,r.pinned){let _=K("pins");_.push(r.name),V("pins",_)}else{let _=K("pins");_=_.filter(g=>g!==r.name),V("pins",_)}n(0,c=c.sort((_,g)=>g.pinned-_.pinned))}function S(){$=me(this.value),n(1,$)}function E(){w=this.value,n(2,w)}const y=()=>{n(3,s=!s)},P=()=>{n(3,s=!s)},k=(r,u)=>{d(r,u)};return e.$$.update=()=>{e.$$.dirty&2&&V("threshold",$),e.$$.dirty&4&&V("watcher",w),e.$$.dirty&8&&n(4,l=s?"flex":"none"),e.$$.dirty&1&&c.sort((r,u)=>u.duration-r.duration),e.$$.dirty&1&&c.sort((r,u)=>u.pinned-r.pinned)},[c,$,w,s,l,d,S,E,y,P,k]}class Be extends De{constructor(t){super(),Ae(this,t,Te,Ie,ye,{})}}new Be({target:document.getElementById("app")});
