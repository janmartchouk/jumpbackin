var _e=Object.defineProperty;var we=(e,t,n)=>t in e?_e(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var G=(e,t,n)=>(we(e,typeof t!="symbol"?t+"":t,n),n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))l(s);new MutationObserver(s=>{for(const u of s)if(u.type==="childList")for(const p of u.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&l(p)}).observe(document,{childList:!0,subtree:!0});function n(s){const u={};return s.integrity&&(u.integrity=s.integrity),s.referrerPolicy&&(u.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?u.credentials="include":s.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function l(s){if(s.ep)return;s.ep=!0;const u=n(s);fetch(s.href,u)}})();function J(){}function he(e){return e()}function ne(){return Object.create(null)}function H(e){e.forEach(he)}function pe(e){return typeof e=="function"}function ye(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}let U;function le(e,t){return e===t?!0:(U||(U=document.createElement("a")),U.href=t,e===U.href)}function ve(e){return Object.keys(e).length===0}function i(e,t){e.appendChild(t)}function W(e,t,n){e.insertBefore(t,n||null)}function R(e){e.parentNode&&e.parentNode.removeChild(e)}function be(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function h(e){return document.createElement(e)}function M(e){return document.createTextNode(e)}function E(){return M(" ")}function $e(){return M("")}function z(e,t,n,l){return e.addEventListener(t,n,l),()=>e.removeEventListener(t,n,l)}function c(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function me(e){return e===""?null:+e}function Se(e){return Array.from(e.childNodes)}function Q(e,t){t=""+t,e.data!==t&&(e.data=t)}function F(e,t){e.value=t??""}function se(e,t,n,l){n==null?e.style.removeProperty(t):e.style.setProperty(t,n,l?"important":"")}let ee;function B(e){ee=e}const I=[],ie=[];let T=[];const re=[],ke=Promise.resolve();let Y=!1;function Oe(){Y||(Y=!0,ke.then(ge))}function Z(e){T.push(e)}const X=new Set;let D=0;function ge(){if(D!==0)return;const e=ee;do{try{for(;D<I.length;){const t=I[D];D++,B(t),Le(t.$$)}}catch(t){throw I.length=0,D=0,t}for(B(null),I.length=0,D=0;ie.length;)ie.pop()();for(let t=0;t<T.length;t+=1){const n=T[t];X.has(n)||(X.add(n),n())}T.length=0}while(I.length);for(;re.length;)re.pop()();Y=!1,X.clear(),B(e)}function Le(e){if(e.fragment!==null){e.update(),H(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(Z)}}function xe(e){const t=[],n=[];T.forEach(l=>e.indexOf(l)===-1?t.push(l):n.push(l)),n.forEach(l=>l()),T=t}const Ee=new Set;function Ne(e,t){e&&e.i&&(Ee.delete(e),e.i(t))}function oe(e){return(e==null?void 0:e.length)!==void 0?e:Array.from(e)}function Ce(e,t,n){const{fragment:l,after_update:s}=e.$$;l&&l.m(t,n),Z(()=>{const u=e.$$.on_mount.map(he).filter(pe);e.$$.on_destroy?e.$$.on_destroy.push(...u):H(u),e.$$.on_mount=[]}),s.forEach(Z)}function Pe(e,t){const n=e.$$;n.fragment!==null&&(xe(n.after_update),H(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function je(e,t){e.$$.dirty[0]===-1&&(I.push(e),Oe(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function Ae(e,t,n,l,s,u,p=null,L=[-1]){const m=ee;B(e);const r=e.$$={fragment:null,ctx:[],props:u,update:J,not_equal:s,bound:ne(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(m?m.$$.context:[])),callbacks:ne(),dirty:L,skip_bound:!1,root:t.target||m.$$.root};p&&p(r.root);let k=!1;if(r.ctx=n?n(e,t.props||{},(o,y,...x)=>{const v=x.length?x[0]:y;return r.ctx&&s(r.ctx[o],r.ctx[o]=v)&&(!r.skip_bound&&r.bound[o]&&r.bound[o](v),k&&je(e,o)),y}):[],r.update(),k=!0,H(r.before_update),r.fragment=l?l(r.ctx):!1,t.target){if(t.hydrate){const o=Se(t.target);r.fragment&&r.fragment.l(o),o.forEach(R)}else r.fragment&&r.fragment.c();t.intro&&Ne(e.$$.fragment),Ce(e,t.target,t.anchor),ge()}B(m)}class De{constructor(){G(this,"$$");G(this,"$$set")}$destroy(){Pe(this,1),this.$destroy=J}$on(t,n){if(!pe(n))return J;const l=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return l.push(n),()=>{const s=l.indexOf(n);s!==-1&&l.splice(s,1)}}$set(t){this.$$set&&!ve(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const ze="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(ze);function ce(e,t,n){const l=e.slice();return l[16]=t[n],l}function ae(e){let t,n,l,s,u,p,L,m=e[16].name+"",r,k,o,y,x=e[16].duration+"",v,j,S,N,C=Array.from(e[16].classes).join(", ")+"",a,f,g,_,P,b=e[16].pinned&&ue();function q(...O){return e[10](e[16],...O)}return{c(){t=h("a"),b&&b.c(),n=E(),l=h("img"),u=E(),p=h("span"),L=h("h2"),r=M(m),k=E(),o=h("span"),y=h("p"),v=M(x),j=M("m"),S=E(),N=h("p"),a=M(C),f=E(),c(l,"alt","favicon"),c(l,"class","site-img"),le(l.src,s=`https://icons.duckduckgo.com/ip3/${e[16].name}.ico`)||c(l,"src",s),c(l,"width","128px"),c(L,"class","site-name"),c(y,"class","site-duration"),c(N,"class","site-classes"),c(o,"class","site-bottom-line"),c(p,"class","site-right"),c(t,"href",g="https://"+e[16].name),c(t,"class","site")},m(O,d){W(O,t,d),b&&b.m(t,null),i(t,n),i(t,l),i(t,u),i(t,p),i(p,L),i(L,r),i(p,k),i(p,o),i(o,y),i(y,v),i(y,j),i(o,S),i(o,N),i(N,a),i(t,f),_||(P=z(t,"contextmenu",q),_=!0)},p(O,d){e=O,e[16].pinned?b||(b=ue(),b.c(),b.m(t,n)):b&&(b.d(1),b=null),d&1&&!le(l.src,s=`https://icons.duckduckgo.com/ip3/${e[16].name}.ico`)&&c(l,"src",s),d&1&&m!==(m=e[16].name+"")&&Q(r,m),d&1&&x!==(x=e[16].duration+"")&&Q(v,x),d&1&&C!==(C=Array.from(e[16].classes).join(", ")+"")&&Q(a,C),d&1&&g!==(g="https://"+e[16].name)&&c(t,"href",g)},d(O){O&&R(t),b&&b.d(),_=!1,P()}}}function ue(e){let t;return{c(){t=h("span"),t.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" height="16px" viewBox="0 0 16 16" width="16px"><g fill="#222222"><path d="m 9 10 h -2 v 2 l 1 1 l 1 -1 z m 0 0"></path><path d="m 10.707031 3.292969 c -0.1875 -0.1875 -0.441406 -0.292969 -0.707031 -0.292969 h -4 c -0.554688 0 -1 0.449219 -1 1 s 0.445312 1 1 1 h 4 c 0.550781 0 1 -0.449219 1 -1 c 0 -0.265625 -0.105469 -0.519531 -0.292969 -0.707031 z m 0 0"></path><path d="m 4 8.988281 c 0 -2.207031 1.792969 -4 4 -4 s 4 1.792969 4 4 z m 0 0"></path><path d="m 6 2.972656 l 0.222656 4.773438 h 3.585938 l 0.191406 -4.738282 z m 0 0"></path></g></svg>',c(t,"class","pin")},m(n,l){W(n,t,l)},d(n){n&&R(t)}}}function fe(e){let t,n=e[16].duration>e[1]&&ae(e);return{c(){n&&n.c(),t=$e()},m(l,s){n&&n.m(l,s),W(l,t,s)},p(l,s){l[16].duration>l[1]?n?n.p(l,s):(n=ae(l),n.c(),n.m(t.parentNode,t)):n&&(n.d(1),n=null)},d(l){l&&R(t),n&&n.d(l)}}}function Ie(e){let t,n,l,s,u,p,L,m,r,k,o,y,x,v,j,S,N,C,a,f,g,_,P,b,q,O=oe(e[0]),d=[];for(let w=0;w<O.length;w+=1)d[w]=fe(ce(e,O,w));return{c(){t=h("main"),n=h("div"),l=h("div"),s=h("h1"),s.textContent="Settings",u=E(),p=h("group"),L=h("label"),L.textContent="Time Threshold:",m=E(),r=h("input"),k=E(),o=h("group"),y=h("label"),y.textContent="Watcher:",x=E(),v=h("input"),j=E(),S=h("div"),N=h("span"),N.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" height="16px" viewBox="0 0 16 16" width="16px"><path d="m 7.5 1.019531 c -0.550781 0 -0.996094 0.445313 -0.996094 0.996094 v 0.453125 c -0.472656 0.128906 -0.929687 0.320312 -1.355468 0.566406 l -0.324219 -0.324218 c -0.390625 -0.390626 -1.019531 -0.390626 -1.410157 0 l -0.703124 0.707031 c -0.390626 0.390625 -0.390626 1.019531 0 1.410156 l 0.320312 0.320313 c -0.246094 0.425781 -0.433594 0.882812 -0.5625 1.355468 h -0.453125 c -0.550781 0 -0.996094 0.445313 -0.996094 0.996094 v 1 c 0 0.550781 0.445313 0.996094 0.996094 0.996094 h 0.449219 c 0.132812 0.472656 0.320312 0.929687 0.566406 1.355468 l -0.320312 0.320313 c -0.390626 0.390625 -0.390626 1.019531 0 1.410156 l 0.703124 0.707031 c 0.390626 0.390626 1.019532 0.390626 1.410157 0 l 0.320312 -0.320312 c 0.429688 0.242188 0.882813 0.433594 1.359375 0.558594 v 0.457031 c 0 0.550781 0.445313 0.996094 0.996094 0.996094 h 0.996094 c 0.554687 0 1 -0.445313 1 -0.996094 v -0.453125 c 0.472656 -0.128906 0.929687 -0.320312 1.355468 -0.566406 l 0.320313 0.324218 c 0.390625 0.390626 1.019531 0.390626 1.410156 0 l 0.707031 -0.707031 c 0.390626 -0.390625 0.390626 -1.019531 0 -1.410156 l -0.320312 -0.320313 c 0.242188 -0.425781 0.433594 -0.882812 0.558594 -1.355468 h 0.453125 c 0.554687 0 1 -0.445313 1 -0.996094 v -1 c 0 -0.550781 -0.445313 -0.996094 -1 -0.996094 h -0.449219 c -0.128906 -0.472656 -0.320312 -0.929687 -0.566406 -1.355468 l 0.324218 -0.320313 c 0.390626 -0.390625 0.390626 -1.019531 0 -1.410156 l -0.707031 -0.707031 c -0.390625 -0.390626 -1.019531 -0.390626 -1.410156 0 l -0.320313 0.320312 c -0.425781 -0.242188 -0.882812 -0.429688 -1.355468 -0.558594 v -0.457031 c 0 -0.550781 -0.445313 -0.996094 -1 -0.996094 z m 0.515625 3.976563 c 1.660156 0 3 1.34375 3 3 s -1.339844 3 -3 3 c -1.65625 0 -3 -1.34375 -3 -3 s 1.34375 -3 3 -3 z m 0 0" fill="#222222"></path></svg>',C=E(),a=h("h1"),a.textContent="Jump back in",f=E(),g=h("h2"),g.textContent="Left-click to open, right-click to pin.",_=E(),P=h("div");for(let w=0;w<d.length;w+=1)d[w].c();c(s,"class","settings-title"),c(L,"for","threshold"),c(r,"type","number"),c(r,"id","threshold"),c(r,"min","0"),c(y,"for","watcher"),c(v,"type","text"),c(v,"id","watcher"),c(l,"class","settings-content"),se(n,"display",e[4]),c(n,"class","settings"),c(N,"class","settings-button"),c(g,"id","info"),c(P,"class","sites"),c(S,"class","content")},m(w,A){W(w,t,A),i(t,n),i(n,l),i(l,s),i(l,u),i(l,p),i(p,L),i(p,m),i(p,r),F(r,e[1]),i(l,k),i(l,o),i(o,y),i(o,x),i(o,v),F(v,e[2]),i(t,j),i(t,S),i(S,N),i(S,C),i(S,a),i(S,f),i(S,g),i(S,_),i(S,P);for(let $=0;$<d.length;$+=1)d[$]&&d[$].m(P,null);b||(q=[z(r,"input",e[6]),z(v,"input",e[7]),z(l,"click",Me),z(n,"click",e[8]),z(N,"click",e[9])],b=!0)},p(w,[A]){if(A&2&&me(r.value)!==w[1]&&F(r,w[1]),A&4&&v.value!==w[2]&&F(v,w[2]),A&16&&se(n,"display",w[4]),A&35){O=oe(w[0]);let $;for($=0;$<O.length;$+=1){const te=ce(w,O,$);d[$]?d[$].p(te,A):(d[$]=fe(te),d[$].c(),d[$].m(P,null))}for(;$<d.length;$+=1)d[$].d(1);d.length=O.length}},i:J,o:J,d(w){w&&R(t),be(d,w),b=!1,H(q)}}}function K(e){return JSON.parse(localStorage.content)[e]}function V(e,t){let n=JSON.parse(localStorage.content);n[e]=t,localStorage.content=JSON.stringify(n)}function de(e,t){for(const n of e)if(n.rule.regex.test(t.name))for(const l of n.name)t.classes.add(l)}const Me=e=>{e.stopPropagation()};function Te(e,t,n){let l,s=new Date,u=new Date().setDate(s.getDate()-1),p=new Date(new Date(u).setHours(4,0,0,0)).toISOString(),L=new Date(new Date(s).setHours(28,0,0,0)).toISOString(),m=[];(!localStorage.content||localStorage.content==="")&&(localStorage.content=JSON.stringify({pins:[],threshold:5,watcher:"aw-watcher-web-firefox"}));let r=K("threshold"),k=K("watcher"),o=!1,y=new Set([]);fetch("http://localhost:5600/api/0/settings/classes").then(a=>a.json()).then(a=>{for(const f of Object.values(a))f.rule.regex&&(f.rule.regex=new RegExp(f.rule.regex.toLowerCase()),y.add(f))}),fetch(`http://localhost:5600/api/0/buckets/${k}/events?end=${L}&start=${p}`).then(a=>a.json()).then(a=>{for(let f of a){let g=!1;for(const _ of m)_.name===new URL(f.data.url).host&&(g=!0,_.duration=Math.round(f.duration/60+_.duration)),de(y,_);if(!g){let _={name:new URL(f.data.url).host,duration:Math.round(f.duration/60),classes:new Set([]),pinned:!1};localStorage.content&&localStorage.content.includes(_.name)&&(_.pinned=!0),de(y,_),_.name&&n(0,m=[...m,_])}}});function x(a,f){if(f.preventDefault(),a.pinned=!a.pinned,a.pinned){let g=K("pins");g.push(a.name),V("pins",g)}else{let g=K("pins");g=g.filter(_=>_!==a.name),V("pins",g)}n(0,m=m.sort((g,_)=>_.pinned-g.pinned))}function v(){r=me(this.value),n(1,r)}function j(){k=this.value,n(2,k)}const S=()=>{n(3,o=!o)},N=()=>{n(3,o=!o)},C=(a,f)=>{x(a,f)};return e.$$.update=()=>{e.$$.dirty&2&&V("threshold",r),e.$$.dirty&4&&V("watcher",k),e.$$.dirty&8&&n(4,l=o?"flex":"none"),e.$$.dirty&1&&m.sort((a,f)=>f.duration-a.duration),e.$$.dirty&1&&m.sort((a,f)=>f.pinned-a.pinned)},[m,r,k,o,l,x,v,j,S,N,C]}class Be extends De{constructor(t){super(),Ae(this,t,Te,Ie,ye,{})}}new Be({target:document.getElementById("app")});
