var ke=Object.defineProperty;var Oe=(e,t,n)=>t in e?ke(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var ee=(e,t,n)=>(Oe(e,typeof t!="symbol"?t+"":t,n),n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))l(i);new MutationObserver(i=>{for(const p of i)if(p.type==="childList")for(const g of p.addedNodes)g.tagName==="LINK"&&g.rel==="modulepreload"&&l(g)}).observe(document,{childList:!0,subtree:!0});function n(i){const p={};return i.integrity&&(p.integrity=i.integrity),i.referrerPolicy&&(p.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?p.credentials="include":i.crossOrigin==="anonymous"?p.credentials="omit":p.credentials="same-origin",p}function l(i){if(i.ep)return;i.ep=!0;const p=n(i);fetch(i.href,p)}})();function W(){}function ve(e){return e()}function ue(){return Object.create(null)}function G(e){e.forEach(ve)}function be(e){return typeof e=="function"}function Le(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}let X;function ae(e,t){return e===t?!0:(X||(X=document.createElement("a")),X.href=t,e===X.href)}function Ee(e){return Object.keys(e).length===0}function r(e,t){e.appendChild(t)}function Y(e,t,n){e.insertBefore(t,n||null)}function Q(e){e.parentNode&&e.parentNode.removeChild(e)}function Ce(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function d(e){return document.createElement(e)}function q(e){return document.createTextNode(e)}function S(){return q(" ")}function Ne(){return q("")}function z(e,t,n,l){return e.addEventListener(t,n,l),()=>e.removeEventListener(t,n,l)}function s(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function $e(e){return e===""?null:+e}function Pe(e){return Array.from(e.childNodes)}function te(e,t){t=""+t,e.data!==t&&(e.data=t)}function I(e,t){e.value=t??""}function fe(e,t,n,l){n==null?e.style.removeProperty(t):e.style.setProperty(t,n,l?"important":"")}let ie;function V(e){ie=e}const R=[],de=[];let H=[];const he=[],De=Promise.resolve();let le=!1;function je(){le||(le=!0,De.then(Se))}function re(e){H.push(e)}const ne=new Set;let J=0;function Se(){if(J!==0)return;const e=ie;do{try{for(;J<R.length;){const t=R[J];J++,V(t),xe(t.$$)}}catch(t){throw R.length=0,J=0,t}for(V(null),R.length=0,J=0;de.length;)de.pop()();for(let t=0;t<H.length;t+=1){const n=H[t];ne.has(n)||(ne.add(n),n())}H.length=0}while(R.length);for(;he.length;)he.pop()();le=!1,ne.clear(),V(e)}function xe(e){if(e.fragment!==null){e.update(),G(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(re)}}function Ae(e){const t=[],n=[];H.forEach(l=>e.indexOf(l)===-1?t.push(l):n.push(l)),n.forEach(l=>l()),H=t}const ze=new Set;function Ie(e,t){e&&e.i&&(ze.delete(e),e.i(t))}function pe(e){return(e==null?void 0:e.length)!==void 0?e:Array.from(e)}function Me(e,t,n){const{fragment:l,after_update:i}=e.$$;l&&l.m(t,n),re(()=>{const p=e.$$.on_mount.map(ve).filter(be);e.$$.on_destroy?e.$$.on_destroy.push(...p):G(p),e.$$.on_mount=[]}),i.forEach(re)}function Te(e,t){const n=e.$$;n.fragment!==null&&(Ae(n.after_update),G(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function Be(e,t){e.$$.dirty[0]===-1&&(R.push(e),je(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function Je(e,t,n,l,i,p,g=null,C=[-1]){const _=ie;V(e);const o=e.$$={fragment:null,ctx:[],props:p,update:W,not_equal:i,bound:ue(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(_?_.$$.context:[])),callbacks:ue(),dirty:C,skip_bound:!1,root:t.target||_.$$.root};g&&g(o.root);let O=!1;if(o.ctx=n?n(e,t.props||{},(f,w,...L)=>{const b=L.length?L[0]:w;return o.ctx&&i(o.ctx[f],o.ctx[f]=b)&&(!o.skip_bound&&o.bound[f]&&o.bound[f](b),O&&Be(e,f)),w}):[],o.update(),O=!0,G(o.before_update),o.fragment=l?l(o.ctx):!1,t.target){if(t.hydrate){const f=Pe(t.target);o.fragment&&o.fragment.l(f),f.forEach(Q)}else o.fragment&&o.fragment.c();t.intro&&Ie(e.$$.fragment),Me(e,t.target,t.anchor),Se()}V(_)}class Re{constructor(){ee(this,"$$");ee(this,"$$set")}$destroy(){Te(this,1),this.$destroy=W}$on(t,n){if(!be(n))return W;const l=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return l.push(n),()=>{const i=l.indexOf(n);i!==-1&&l.splice(i,1)}}$set(t){this.$$set&&!Ee(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const qe="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(qe);function me(e,t,n){const l=e.slice();return l[22]=t[n],l}function ge(e){let t,n,l,i,p,g,C,_=e[22].name+"",o,O,f,w,L=e[22].duration+"",b,j,N,P,x=Array.from(e[22].classes).join(", ")+"",E,M,y,D,T,a=e[22].pinned&&_e();function c(...u){return e[16](e[22],...u)}return{c(){t=d("a"),a&&a.c(),n=S(),l=d("img"),p=S(),g=d("span"),C=d("h2"),o=q(_),O=S(),f=d("span"),w=d("p"),b=q(L),j=q("m"),N=S(),P=d("p"),E=q(x),M=S(),s(l,"alt","favicon"),s(l,"class","site-img"),ae(l.src,i=`https://icons.duckduckgo.com/ip3/${e[22].name}.ico`)||s(l,"src",i),s(l,"width","128px"),s(C,"class","site-name"),s(w,"class","site-duration"),s(P,"class","site-classes"),s(f,"class","site-bottom-line"),s(g,"class","site-right"),s(t,"href",y="https://"+e[22].name),s(t,"class","site")},m(u,m){Y(u,t,m),a&&a.m(t,null),r(t,n),r(t,l),r(t,p),r(t,g),r(g,C),r(C,o),r(g,O),r(g,f),r(f,w),r(w,b),r(w,j),r(f,N),r(f,P),r(P,E),r(t,M),D||(T=z(t,"contextmenu",c),D=!0)},p(u,m){e=u,e[22].pinned?a||(a=_e(),a.c(),a.m(t,n)):a&&(a.d(1),a=null),m&1&&!ae(l.src,i=`https://icons.duckduckgo.com/ip3/${e[22].name}.ico`)&&s(l,"src",i),m&1&&_!==(_=e[22].name+"")&&te(o,_),m&1&&L!==(L=e[22].duration+"")&&te(b,L),m&1&&x!==(x=Array.from(e[22].classes).join(", ")+"")&&te(E,x),m&1&&y!==(y="https://"+e[22].name)&&s(t,"href",y)},d(u){u&&Q(t),a&&a.d(),D=!1,T()}}}function _e(e){let t;return{c(){t=d("span"),t.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" height="16px" viewBox="0 0 16 16" width="16px"><g fill="#222222"><path d="m 9 10 h -2 v 2 l 1 1 l 1 -1 z m 0 0"></path><path d="m 10.707031 3.292969 c -0.1875 -0.1875 -0.441406 -0.292969 -0.707031 -0.292969 h -4 c -0.554688 0 -1 0.449219 -1 1 s 0.445312 1 1 1 h 4 c 0.550781 0 1 -0.449219 1 -1 c 0 -0.265625 -0.105469 -0.519531 -0.292969 -0.707031 z m 0 0"></path><path d="m 4 8.988281 c 0 -2.207031 1.792969 -4 4 -4 s 4 1.792969 4 4 z m 0 0"></path><path d="m 6 2.972656 l 0.222656 4.773438 h 3.585938 l 0.191406 -4.738282 z m 0 0"></path></g></svg>',s(t,"class","pin")},m(n,l){Y(n,t,l)},d(n){n&&Q(t)}}}function we(e){let t,n=e[22].duration>e[1]&&ge(e);return{c(){n&&n.c(),t=Ne()},m(l,i){n&&n.m(l,i),Y(l,t,i)},p(l,i){l[22].duration>l[1]?n?n.p(l,i):(n=ge(l),n.c(),n.m(t.parentNode,t)):n&&(n.d(1),n=null)},d(l){l&&Q(t),n&&n.d(l)}}}function He(e){let t,n,l,i,p,g,C,_,o,O,f,w,L,b,j,N,P,x,E,M,y,D,T,a,c,u,m,v,oe,U,Z,se,B=pe(e[0]),k=[];for(let h=0;h<B.length;h+=1)k[h]=we(me(e,B,h));return{c(){t=d("main"),n=d("div"),l=d("div"),i=d("h1"),i.textContent="Settings",p=S(),g=d("group"),C=d("label"),C.textContent="Time Threshold:",_=S(),o=d("input"),O=S(),f=d("group"),w=d("label"),w.textContent="Watcher:",L=S(),b=d("input"),j=S(),N=d("group"),P=d("label"),P.textContent="Search URL:",x=S(),E=d("input"),M=S(),y=d("div"),D=d("span"),D.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" height="16px" viewBox="0 0 16 16" width="16px"><path d="m 7.5 1.019531 c -0.550781 0 -0.996094 0.445313 -0.996094 0.996094 v 0.453125 c -0.472656 0.128906 -0.929687 0.320312 -1.355468 0.566406 l -0.324219 -0.324218 c -0.390625 -0.390626 -1.019531 -0.390626 -1.410157 0 l -0.703124 0.707031 c -0.390626 0.390625 -0.390626 1.019531 0 1.410156 l 0.320312 0.320313 c -0.246094 0.425781 -0.433594 0.882812 -0.5625 1.355468 h -0.453125 c -0.550781 0 -0.996094 0.445313 -0.996094 0.996094 v 1 c 0 0.550781 0.445313 0.996094 0.996094 0.996094 h 0.449219 c 0.132812 0.472656 0.320312 0.929687 0.566406 1.355468 l -0.320312 0.320313 c -0.390626 0.390625 -0.390626 1.019531 0 1.410156 l 0.703124 0.707031 c 0.390626 0.390626 1.019532 0.390626 1.410157 0 l 0.320312 -0.320312 c 0.429688 0.242188 0.882813 0.433594 1.359375 0.558594 v 0.457031 c 0 0.550781 0.445313 0.996094 0.996094 0.996094 h 0.996094 c 0.554687 0 1 -0.445313 1 -0.996094 v -0.453125 c 0.472656 -0.128906 0.929687 -0.320312 1.355468 -0.566406 l 0.320313 0.324218 c 0.390625 0.390626 1.019531 0.390626 1.410156 0 l 0.707031 -0.707031 c 0.390626 -0.390625 0.390626 -1.019531 0 -1.410156 l -0.320312 -0.320313 c 0.242188 -0.425781 0.433594 -0.882812 0.558594 -1.355468 h 0.453125 c 0.554687 0 1 -0.445313 1 -0.996094 v -1 c 0 -0.550781 -0.445313 -0.996094 -1 -0.996094 h -0.449219 c -0.128906 -0.472656 -0.320312 -0.929687 -0.566406 -1.355468 l 0.324218 -0.320313 c 0.390626 -0.390625 0.390626 -1.019531 0 -1.410156 l -0.707031 -0.707031 c -0.390625 -0.390626 -1.019531 -0.390626 -1.410156 0 l -0.320313 0.320312 c -0.425781 -0.242188 -0.882812 -0.429688 -1.355468 -0.558594 v -0.457031 c 0 -0.550781 -0.445313 -0.996094 -1 -0.996094 z m 0.515625 3.976563 c 1.660156 0 3 1.34375 3 3 s -1.339844 3 -3 3 c -1.65625 0 -3 -1.34375 -3 -3 s 1.34375 -3 3 -3 z m 0 0" fill="#222222"></path></svg>',T=S(),a=d("input"),c=S(),u=d("h1"),u.textContent="Jump back in",m=S(),v=d("h2"),v.textContent="Left-click to open, right-click to pin.",oe=S(),U=d("div");for(let h=0;h<k.length;h+=1)k[h].c();s(i,"class","settings-title"),s(C,"for","threshold"),s(o,"type","number"),s(o,"id","threshold"),s(o,"min","0"),s(w,"for","watcher"),s(b,"type","text"),s(b,"id","watcher"),s(P,"for","searchurl"),s(E,"type","text"),s(E,"id","searchurl"),s(l,"class","settings-content"),fe(n,"display",e[6]),s(n,"class","settings"),s(D,"class","settings-button"),s(a,"placeholder","Search"),s(a,"id","searchbox"),a.autofocus=!0,s(a,"type","text"),s(v,"id","info"),s(U,"class","sites"),s(y,"class","content")},m(h,A){Y(h,t,A),r(t,n),r(n,l),r(l,i),r(l,p),r(l,g),r(g,C),r(g,_),r(g,o),I(o,e[1]),r(l,O),r(l,f),r(f,w),r(f,L),r(f,b),I(b,e[2]),r(l,j),r(l,N),r(N,P),r(N,x),r(N,E),I(E,e[3]),r(t,M),r(t,y),r(y,D),r(y,T),r(y,a),I(a,e[5]),r(y,c),r(y,u),r(y,m),r(y,v),r(y,oe),r(y,U);for(let $=0;$<k.length;$+=1)k[$]&&k[$].m(U,null);a.focus(),Z||(se=[z(o,"input",e[9]),z(b,"input",e[10]),z(E,"input",e[11]),z(l,"click",Ue),z(n,"click",e[12]),z(D,"click",e[13]),z(a,"input",e[14]),z(a,"keydown",e[15])],Z=!0)},p(h,[A]){if(A&2&&$e(o.value)!==h[1]&&I(o,h[1]),A&4&&b.value!==h[2]&&I(b,h[2]),A&8&&E.value!==h[3]&&I(E,h[3]),A&64&&fe(n,"display",h[6]),A&32&&a.value!==h[5]&&I(a,h[5]),A&131){B=pe(h[0]);let $;for($=0;$<B.length;$+=1){const ce=me(h,B,$);k[$]?k[$].p(ce,A):(k[$]=we(ce),k[$].c(),k[$].m(U,null))}for(;$<k.length;$+=1)k[$].d(1);k.length=B.length}},i:W,o:W,d(h){h&&Q(t),Ce(k,h),Z=!1,G(se)}}}function F(e){return JSON.parse(localStorage.content)[e]}function K(e,t){let n=JSON.parse(localStorage.content);n[e]=t,localStorage.content=JSON.stringify(n)}function ye(e,t){for(const n of e)if(n.rule.regex.test(t.name))for(const l of n.name)t.classes.add(l)}const Ue=e=>{e.stopPropagation()};function Fe(e,t,n){let l,i=new Date,p=new Date().setDate(i.getDate()-1),g=new Date(new Date(p).setHours(4,0,0,0)).toISOString(),C=new Date(new Date(i).setHours(28,0,0,0)).toISOString(),_=[];(!localStorage.content||localStorage.content==="")&&(localStorage.content=JSON.stringify({pins:[],threshold:5,watcher:"aw-watcher-web-firefox",searchurl:"https://duckduckgo.com/?q="}));let o=F("threshold"),O=F("watcher"),f=F("searchurl"),w=!1,L=new Set([]);fetch("http://localhost:5600/api/0/settings/classes").then(c=>c.json()).then(c=>{for(const u of Object.values(c))u.rule.regex&&(u.rule.regex=new RegExp(u.rule.regex.toLowerCase()),L.add(u))}),fetch(`http://localhost:5600/api/0/buckets/${O}/events?end=${C}&start=${g}`).then(c=>c.json()).then(c=>{for(let u of c){let m=!1;for(const v of _)v.name===new URL(u.data.url).host&&(m=!0,v.duration=Math.round(u.duration/60+v.duration)),ye(L,v);if(!m){let v={name:new URL(u.data.url).host,duration:Math.round(u.duration/60),classes:new Set([]),pinned:!1};localStorage.content&&localStorage.content.includes(v.name)&&(v.pinned=!0),ye(L,v),v.name&&n(0,_=[..._,v])}}});function b(c,u){if(u.preventDefault(),c.pinned=!c.pinned,c.pinned){let m=F("pins");m.push(c.name),K("pins",m)}else{let m=F("pins");m=m.filter(v=>v!==c.name),K("pins",m)}n(0,_=_.sort((m,v)=>v.pinned-m.pinned))}let j="";function N(c){c.key=="Enter"&&(c.preventDefault(),c.stopPropagation(),window.location.replace(`${f}${j}`))}function P(){o=$e(this.value),n(1,o)}function x(){O=this.value,n(2,O)}function E(){f=this.value,n(3,f)}const M=()=>{n(4,w=!w)},y=()=>{n(4,w=!w)};function D(){j=this.value,n(5,j)}const T=c=>N(c),a=(c,u)=>{b(c,u)};return e.$$.update=()=>{e.$$.dirty&2&&K("threshold",o),e.$$.dirty&4&&K("watcher",O),e.$$.dirty&8&&K("searchurl",f),e.$$.dirty&16&&n(6,l=w?"flex":"none"),e.$$.dirty&1&&_.sort((c,u)=>u.duration-c.duration),e.$$.dirty&1&&_.sort((c,u)=>u.pinned-c.pinned)},[_,o,O,f,w,j,l,b,N,P,x,E,M,y,D,T,a]}class Ke extends Re{constructor(t){super(),Je(this,t,Fe,He,Le,{})}}new Ke({target:document.getElementById("app")});
